# Basic artist data - optimized query with minimal joins
# Uses wikibase:label service for efficiency, avoids expensive schema:about lookups

SELECT
  ?artist
  ?artistLabel
  ?artistDescription
  ?isHuman
  ?country ?countryLabel
  ?givenName ?givenNameLabel
  ?familyName ?familyNameLabel
  ?officialWebsite
  ?imageCommons
  ?logoCommons
  ?commonsCategory
  ?formed
  ?disbanded
  ?musicBrainzId
WHERE {
  VALUES ?artist { {{values}} }

  # Check if human (Q5) for person vs group detection - boolean flag avoids row explosion
  BIND(EXISTS { ?artist wdt:P31 wd:Q5 } AS ?isHuman)

  # Country: try origin first (P495), then citizenship (P27)
  OPTIONAL { ?artist wdt:P495 ?country . }
  OPTIONAL {
    FILTER NOT EXISTS { ?artist wdt:P495 ?any }
    ?artist wdt:P27 ?country .
  }

  # Name components for sort name (P735 = given name, P734 = family name)
  OPTIONAL { ?artist wdt:P735 ?givenName . }
  OPTIONAL { ?artist wdt:P734 ?familyName . }

  # Core properties - simple single-value lookups
  OPTIONAL { ?artist wdt:P856 ?officialWebsite . }
  OPTIONAL { ?artist wdt:P18  ?imageCommons . }
  OPTIONAL { ?artist wdt:P154 ?logoCommons . }
  OPTIONAL { ?artist wdt:P373 ?commonsCategory . }
  OPTIONAL { ?artist wdt:P571 ?formed . }
  OPTIONAL { ?artist wdt:P576 ?disbanded . }
  OPTIONAL { ?artist wdt:P434 ?musicBrainzId . }

  # Use wikibase:label service for all labels (efficient, handles fallback)
  SERVICE wikibase:label {
    bd:serviceParam wikibase:language "en,de,fr,es,it,pt,nl,*" .
  }
}
